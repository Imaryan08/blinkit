<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="./styles/main.css">   

    <title>Order</title>
</head>

<body>
    <div id="container">
        <div id="sidebar">
        
        </div>
  
        <div id="main">
            <div id="show">
                <div id="cont"></div>
                <p id="totalDisplay"></p>
                <br />
                <br />
             </div>
             <img class="img" src="https://cdn.grofers.com/cdn-cgi/image/f=auto,fit=scale-down,q=50,metadata=none,w=486,h=486/assets/ui/empty_states/emp_empty_order_history.png" alt="/">

 <div class="sam">
            <h4>You have no past orders</h4>
            <p>Let's get you started</p>
            <button onclick="window.location.href='index.html'"> Start shoping</button>
         </div>
        </div>
      </div>  

</body>
</html>
<script type="module">
 
 import navbar from "./components/navbars.js";
 //console.log('navbar:', navbar)
 let sidebar_div = document.getElementById("sidebar");
 sidebar_div.innerHTML = navbar();



 let order_placed = localStorage.getItem("order_placed");
      if (!order_placed) {
        order_placed = [];
        localStorage.setItem("order_placed", JSON.stringify(order_placed));
      } else {
        order_placed = JSON.parse(order_placed);
      }

      let total = order_placed.reduce(function (acc, curr) {
        return acc + curr.price;
      }, 0);

      let container = document.getElementById("cont");

      // create table and table head;
      let table = document.createElement("table");
      let thead = document.createElement("thead");
      let theadRow = document.createElement("tr");
      let th1 = document.createElement("th");
      th1.textContent = "Image";
      let th2 = document.createElement("th");
      th2.textContent = "Title";
      let th3 = document.createElement("th");
      th3.textContent = "Price";

      theadRow.append(th1, th2, th3);
      thead.append(theadRow);
      let tbody = document.createElement("tbody");

      order_placed.forEach(function (prod) {
        
        let tr = document.createElement("tr");

        let td1 = document.createElement("td");
        let prodImg = document.createElement("img");
        prodImg.src = prod.image;
        td1.append(prodImg);
        let td2 = document.createElement("td");
        td2.textContent = prod.title;
        let td3 = document.createElement("td");
        td3.textContent = prod.price;

        tr.append(td1, td2, td3);
        tbody.append(tr);
      });
      table.append(thead, tbody);
      container.append(table);

      function totalDisplay(total) {
       
        let totalDisplay = document.getElementById("totalDisplay"); // get totalDisplay element
        totalDisplay.textContent = "Total : " + total; 
      }
      totalDisplay(total);






</script>